# üì¶ H∆∞·ªõng d·∫´n T√°ch Backend v√† Frontend

## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?




## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?




## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?




## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?




## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?




## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?




## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?




## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?




## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?




## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?




## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?




## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?




## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?




## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?




## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?




## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?




## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?




## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?




## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?




## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?




## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?




## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?




## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?




## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?




## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?




## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?




## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?




## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?




## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?




## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?




## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?




## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?




## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?




## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?




## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?




## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?




## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?




## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?




## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?




## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?




## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?




## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?




## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?




## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?




## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?




## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?




## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?




## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?




## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?




## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?




## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?





## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?




## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?




## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?




## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?




## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?




## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?




## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?




## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?




## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?




## ‚úÖ ƒê√£ t·∫°o c·∫•u tr√∫c c∆° b·∫£n

### Backend (`/backend`)
- ‚úÖ `server.js` - Express server
- ‚úÖ `package.json` - Dependencies
- ‚úÖ `lib/prisma.js` - Prisma client
- ‚úÖ `lib/auth.js` - Auth utilities (Express version)
- ‚úÖ `routes/auth.js` - Auth routes (m·∫´u)
- ‚úÖ `routes/movies.js` - Movies routes (m·∫´u)

### C·∫ßn l√†m ti·∫øp:

## B∆∞·ªõc 1: Copy Prisma files

```bash
# Copy schema v√† migrations
cp -r prisma/* backend/prisma/
```

Ho·∫∑c copy th·ªß c√¥ng:
- `prisma/schema.prisma` ‚Üí `backend/prisma/schema.prisma`
- `prisma/seed.ts` ‚Üí `backend/prisma/seed.ts`
- `prisma/migrations/` ‚Üí `backend/prisma/migrations/`

## B∆∞·ªõc 2: Copy c√°c API routes c√≤n l·∫°i

Copy t·ª´ `app/api/` sang `backend/routes/`:

### Routes c·∫ßn copy:
- `app/api/bookings/route.js` ‚Üí `backend/routes/bookings.js`
- `app/api/branches/route.js` ‚Üí `backend/routes/branches.js`
- `app/api/concessions/route.js` ‚Üí `backend/routes/concessions.js`
- `app/api/showtimes/route.js` ‚Üí `backend/routes/showtimes.js`
- `app/api/promotions/route.js` ‚Üí `backend/routes/promotions.js`
- `app/api/search/route.js` ‚Üí `backend/routes/search.js`
- `app/api/payments/create-qr/route.js` ‚Üí `backend/routes/payments.js`
- `app/api/payments/check-status/route.js` ‚Üí Th√™m v√†o `backend/routes/payments.js`
- `app/api/cron/check-payments/route.js` ‚Üí `backend/routes/cron.js`

### Admin routes:
- `app/api/admin/movies/route.js` ‚Üí `backend/routes/admin/movies.js`
- `app/api/admin/users/route.js` ‚Üí `backend/routes/admin/users.js`
- `app/api/admin/cinemas/route.js` ‚Üí `backend/routes/admin/cinemas.js`
- `app/api/admin/showtimes/route.js` ‚Üí `backend/routes/admin/showtimes.js`
- `app/api/admin/promotions/route.js` ‚Üí `backend/routes/admin/promotions.js`
- `app/api/admin/orders/route.js` ‚Üí `backend/routes/admin/orders.js`

## B∆∞·ªõc 3: C·∫≠p nh·∫≠t imports trong routes

Thay ƒë·ªïi t·ª´ Next.js sang Express:

**Tr∆∞·ªõc (Next.js):**
```javascript
import { NextResponse } from "next/server";
import { prisma } from "@/lib/prisma";
import { getCurrentUser } from "@/lib/auth";

export async function GET(request) {
  const user = await getCurrentUser();
  return NextResponse.json({ data });
}
```

**Sau (Express):**
```javascript
import express from 'express';
import { prisma } from '../lib/prisma.js';
import { getCurrentUser, requireAuth } from '../lib/auth.js';

const router = express.Router();

router.get('/', async (req, res) => {
  const user = getCurrentUser(req);
  res.json({ data });
});
```

## B∆∞·ªõc 4: C√†i ƒë·∫∑t dependencies cho backend

```bash
cd backend
npm install
```

## B∆∞·ªõc 5: C·∫•u h√¨nh backend

1. Copy `.env` t·ª´ root ho·∫∑c t·∫°o m·ªõi:
```bash
cd backend
cp ../.env .env
```

2. C·∫≠p nh·∫≠t `.env`:
```env
PORT=5000
FRONTEND_URL=http://localhost:3000
DATABASE_URL="mysql://user:password@localhost:3306/cinehub"
JWT_SECRET=your-secret
JWT_REFRESH_SECRET=your-refresh-secret
```

## B∆∞·ªõc 6: T·∫°o Frontend m·ªõi

T·∫°o folder `frontend/` v√† copy:

```bash
# T·∫°o frontend folder
mkdir frontend

# Copy c√°c file/folder c·∫ßn thi·∫øt
cp -r app frontend/
cp -r components frontend/
cp -r contexts frontend/
cp -r public frontend/
cp package.json frontend/
cp next.config.mjs frontend/
cp jsconfig.json frontend/
cp postcss.config.mjs frontend/
cp tailwind.config.js frontend/ (n·∫øu c√≥)
```

## B∆∞·ªõc 7: C·∫≠p nh·∫≠t Frontend

1. **T·∫°o file `frontend/lib/api.js`** ƒë·ªÉ g·ªçi API:

```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';

export async function apiRequest(endpoint, options = {}) {
  const url = `${API_URL}${endpoint}`;
  const response = await fetch(url, {
    ...options,
    credentials: 'include', // ƒê·ªÉ g·ª≠i cookies
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
  });
  
  if (!response.ok) {
    const error = await response.json();
    throw new Error(error.message || 'Request failed');
  }
  
  return response.json();
}
```

2. **C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls** trong frontend:

**Tr∆∞·ªõc:**
```javascript
const res = await fetch("/api/movies");
```

**Sau:**
```javascript
import { apiRequest } from '@/lib/api';
const data = await apiRequest("/api/movies");
```

Ho·∫∑c:
```javascript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000';
const res = await fetch(`${API_URL}/api/movies`, { credentials: 'include' });
```

## B∆∞·ªõc 8: C·∫•u h√¨nh Frontend

1. **T·∫°o `frontend/.env.local`:**
```env
NEXT_PUBLIC_API_URL=http://localhost:5000
```

2. **C·∫≠p nh·∫≠t `frontend/package.json`:**
```json
{
  "name": "lmk-cinema-frontend",
  "scripts": {
    "dev": "next dev --turbopack -p 3000",
    "build": "next build --turbopack",
    "start": "next start -p 3000"
  }
}
```

## B∆∞·ªõc 9: Ch·∫°y c·∫£ 2 servers

**Terminal 1 - Backend:**
```bash
cd backend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:5000
```

**Terminal 2 - Frontend:**
```bash
cd frontend
npm install
npm run dev
# Server ch·∫°y tr√™n http://localhost:3000
```

## B∆∞·ªõc 10: C√†i cookie-parser cho backend

```bash
cd backend
npm install cookie-parser
```

V√† c·∫≠p nh·∫≠t `server.js`:
```javascript
import cookieParser from 'cookie-parser';
app.use(cookieParser());
```

## üìù Checklist

- [ ] Copy Prisma files
- [ ] Copy t·∫•t c·∫£ API routes
- [ ] C·∫≠p nh·∫≠t imports (Next.js ‚Üí Express)
- [ ] C√†i dependencies backend
- [ ] C·∫•u h√¨nh .env backend
- [ ] T·∫°o frontend folder
- [ ] Copy frontend files
- [ ] T·∫°o lib/api.js
- [ ] C·∫≠p nh·∫≠t t·∫•t c·∫£ fetch calls
- [ ] C·∫•u h√¨nh .env frontend
- [ ] Test c·∫£ 2 servers

## üöÄ Script t·ª± ƒë·ªông (t√πy ch·ªçn)

T√¥i c√≥ th·ªÉ t·∫°o script ƒë·ªÉ t·ª± ƒë·ªông copy v√† convert c√°c routes. B·∫°n c√≥ mu·ªën t√¥i t·∫°o kh√¥ng?














